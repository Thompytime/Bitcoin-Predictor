{"ast":null,"code":"import { extendedEncodeURIComponent } from '@aws-amplify/core/internals/aws-client-utils';\nimport { IntegrityError } from '../../../errors/IntegrityError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction validateObjectUrl(_ref) {\n  let {\n    bucketName,\n    key,\n    objectURL\n  } = _ref;\n  if (!bucketName || !key || !objectURL) {\n    throw new IntegrityError();\n  }\n  const bucketWithDots = bucketName.includes('.');\n  const encodedBucketName = extendedEncodeURIComponent(bucketName);\n  const encodedKey = key.split('/').map(extendedEncodeURIComponent).join('/');\n  const isPathStyleUrl = objectURL.pathname === `/${encodedBucketName}/${encodedKey}`;\n  const isSubdomainUrl = objectURL.hostname.startsWith(`${encodedBucketName}.`) && objectURL.pathname === `/${encodedKey}`;\n  if (!(isPathStyleUrl || !bucketWithDots && isSubdomainUrl)) {\n    throw new IntegrityError();\n  }\n}\nexport { validateObjectUrl };","map":{"version":3,"names":["validateObjectUrl","_ref","bucketName","key","objectURL","IntegrityError","bucketWithDots","includes","encodedBucketName","extendedEncodeURIComponent","encodedKey","split","map","join","isPathStyleUrl","pathname","isSubdomainUrl","hostname","startsWith"],"sources":["C:\\Users\\lvsct\\Desktop\\bitcoin-prediction\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\utils\\validateObjectUrl.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { extendedEncodeURIComponent } from '@aws-amplify/core/internals/aws-client-utils';\nimport { IntegrityError } from '../../../errors/IntegrityError';\nexport function validateObjectUrl({ bucketName, key, objectURL, }) {\n    if (!bucketName || !key || !objectURL) {\n        throw new IntegrityError();\n    }\n    const bucketWithDots = bucketName.includes('.');\n    const encodedBucketName = extendedEncodeURIComponent(bucketName);\n    const encodedKey = key.split('/').map(extendedEncodeURIComponent).join('/');\n    const isPathStyleUrl = objectURL.pathname === `/${encodedBucketName}/${encodedKey}`;\n    const isSubdomainUrl = objectURL.hostname.startsWith(`${encodedBucketName}.`) &&\n        objectURL.pathname === `/${encodedKey}`;\n    if (!(isPathStyleUrl || (!bucketWithDots && isSubdomainUrl))) {\n        throw new IntegrityError();\n    }\n}\n"],"mappings":";;;AAAA;AACA;AAGO,SAASA,iBAAiBA,CAAAC,IAAA,EAAkC;EAAA,IAAjC;IAAEC,UAAU;IAAEC,GAAG;IAAEC;EAAS,CAAG,GAAAH,IAAA;EAC7D,IAAI,CAACC,UAAU,IAAI,CAACC,GAAG,IAAI,CAACC,SAAS,EAAE;IACnC,MAAM,IAAIC,cAAc,EAAE;EAClC;EACI,MAAMC,cAAc,GAAGJ,UAAU,CAACK,QAAQ,CAAC,GAAG,CAAC;EAC/C,MAAMC,iBAAiB,GAAGC,0BAA0B,CAACP,UAAU,CAAC;EAChE,MAAMQ,UAAU,GAAGP,GAAG,CAACQ,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACH,0BAA0B,CAAC,CAACI,IAAI,CAAC,GAAG,CAAC;EAC3E,MAAMC,cAAc,GAAGV,SAAS,CAACW,QAAQ,KAAK,IAAIP,iBAAiB,IAAIE,UAAU,EAAE;EACnF,MAAMM,cAAc,GAAGZ,SAAS,CAACa,QAAQ,CAACC,UAAU,CAAC,GAAGV,iBAAiB,GAAG,CAAC,IACzEJ,SAAS,CAACW,QAAQ,KAAK,IAAIL,UAAU,EAAE;EAC3C,IAAI,EAAEI,cAAc,IAAK,CAACR,cAAc,IAAIU,cAAe,CAAC,EAAE;IAC1D,MAAM,IAAIX,cAAc,EAAE;EAClC;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}